## General idea
The Makefile uses the mechanisms of Kbuild, referencing /lib/modules/$(uname -r)/build. The result of the build will be the file ave.ko kernel module, which can be loaded with the command:
sudo insmod ave.ko
and then check it with:
lsmod | grep ave

## Makefile

1. all (or make)  
   Builds ave.ko by substituting keys and PROCNAME - mandatory to build (interface name /proc/<PROCNAME>). 
2. injection 
   Builds the injection binary from injection.S for security logic.
3. strip 
   Strips debugging symbols from ave.ko.
4. reset-auto  
   Resets generated keys in source.
5. clean  
   Deletes object files and resets keys, returning the project to a clean state.
6. lgtm  
   Sequentially calls injection and module build.

## Note
When DEPLOY=1, builds without debugging.  
TEST_ENV Uses fixed test keys.  
BDKEY and UNHIDEKEY are randomly generated by default (can be set manually or by using the test environment).  

## Step-by-step instructions (Ubuntu)

1. Install packages:
   sudo apt update
   sudo apt install build-essential linux-headers-$(uname -r) \
                    ctags uuid-runtime
2. Go to the source directory:
   cd /home/user/ave
3. Build by specifying PROCNAME:
   make PROCNAME=hidden
   Or without debugging:
   DEPLOY=1 make PROCNAME=hidden
4. Check for ave.ko:
   ls -l ave.ko
5. Load the module:
   sudo insmod ave.ko.
   lsmod | grep ave
   And look at /proc/hidden.
6. Build injection:
      make injection
7. Use additional targets:
   - make strip: remove debugging symbols from ave.ko.
   - make lgtm: make injection first, then build.
8. Clean:
   make clean
